<section class="section">
    <div class="container">
        <p class="title">View Offers</p>

        <table class="table is-fullwidth">
            <thead>
                <tr>
                    <th>Date</th>
                    <th>Nom du vendeur</th>
                    <th>Notes</th>
                    <th>Montant</th>
                    <th>Livraison en</th>
                    <th>Statut</th>
                    <th>Action</th>
                </tr>
            </thead>

            <tbody>
                
                <% if @offers.blank? %>
                    <tr>
                        <td colspan="7" class="has-text-centered"><h1>RIEN À MONTRER ICI</h1></td>
                    </tr>
                <% else %>
                    <% @offers.each do |o| %>
                        <tr>
                            <td><%= o.created_at.strftime('%d, %b %Y') %></td>
                            <td>
                                <%= link_to users_path(o.user) do %>
                                    <figure class="image is-48x48 avatar <%= o.user.online? ? 'online' : 'offline' %>">
                                        <%= image_tag avatar_url(o.user), class: "is-rounded" %>
                                    </figure>
                                <% end %>
                            </td>
                            <td><%= o.note %></td>
                            <td>€<%= o.amount %></td>
                            <td><%= pluralize(o.days, 'jour') %></td>
                            <td>
                                <span class="tag <%= 'is-warning' if o.pending? %> 
                                                <%= 'is-success' if o.accepted? %> 
                                                <%= 'is-danger' if o.rejected? %>">
                                    <%= o.status.capitalize %>
                                </span>
                            </td>
                            <td>
                                <%= link_to accept_offer_path(o), method: :put, 
                                            data: {confirm: 'Êtes-vous sûr ?'}, 
                                            class: "button is-small is-primary is-outlined #{'is-hidden' if !o.pending?}" do %>
                                    <span class="icon"><i class="far fa-check-circle fa-lg"></i></span>
                                    <span>Accept</span>
                                <% end %>
                                <%= link_to reject_offer_path(o), method: :put, 
                                            data: {confirm: 'Êtes-vous sûr ?'}, 
                                            class: "button is-small is-danger is-outlined #{'is-hidden' if !o.pending?}" do %>
                                    <span class="icon"><i class="far fa-times-circle fa-lg"></i></span>
                                    <span>Reject</span>
                                <% end %>
                            </td>
                        </tr>
                    <% end %>
                <% end %>

            </tbody>
        </table>
    </div>
</section>